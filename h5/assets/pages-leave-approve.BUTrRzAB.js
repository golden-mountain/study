import{_ as e,u as a,q as l,c as t,w as n,i as o,o as i,a as s,m as u,z as d,d as f,p as c,v as r}from"./index-h3lAx3Le.js";const v=e({data:()=>({leaveInfo:null}),onLoad(e){this.getLeaveInfo(e.id)},methods:{async getLeaveInfo(e){if(!e||"string"!=typeof e)return void a({title:"无效的请假ID",icon:"none"});const t=await l.callFunction({name:"leave",data:{action:"get",id:String(e)}});200===t.result.code&&(this.leaveInfo=t.result.data)},async approve(e){var t;if(!(null==(t=this.leaveInfo)?void 0:t._id))return void a({title:"无法找到请假记录",icon:"none"});200===(await l.callFunction({name:"leave",data:{action:"update",id:String(this.leaveInfo._id),status:e?"approved":"rejected"}})).result.code&&a({title:e?"已同意":"已拒绝",icon:"success"})}}},[["render",function(e,a,l,v,_,m){const p=c,I=o,g=r;return i(),t(I,{class:"container"},{default:n((()=>[_.leaveInfo?(i(),t(I,{key:0},{default:n((()=>[s(I,{class:"info-item"},{default:n((()=>[s(p,null,{default:n((()=>[u("姓名：")])),_:1}),s(p,null,{default:n((()=>[u(d(_.leaveInfo.name),1)])),_:1})])),_:1}),s(I,{class:"info-item"},{default:n((()=>[s(p,null,{default:n((()=>[u("寝室：")])),_:1}),s(p,null,{default:n((()=>[u(d(_.leaveInfo.dorm),1)])),_:1})])),_:1}),s(I,{class:"info-item"},{default:n((()=>[s(p,null,{default:n((()=>[u("请假时间：")])),_:1}),s(p,null,{default:n((()=>[u(d(_.leaveInfo.time),1)])),_:1})])),_:1}),s(I,{class:"info-item"},{default:n((()=>[s(p,null,{default:n((()=>[u("课时：")])),_:1}),s(p,null,{default:n((()=>[u(d(_.leaveInfo.period),1)])),_:1})])),_:1}),s(I,{class:"info-item"},{default:n((()=>[s(p,null,{default:n((()=>[u("请假原因：")])),_:1}),s(p,null,{default:n((()=>[u(d(_.leaveInfo.reason),1)])),_:1})])),_:1}),s(g,{onClick:a[0]||(a[0]=e=>m.approve(!0))},{default:n((()=>[u("同意")])),_:1}),s(g,{onClick:a[1]||(a[1]=e=>m.approve(!1))},{default:n((()=>[u("拒绝")])),_:1})])),_:1})):f("",!0)])),_:1})}]]);export{v as default};
