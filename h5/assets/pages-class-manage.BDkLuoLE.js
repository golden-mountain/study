import{_ as a,f as e,q as t,u as l,V as s,h as o,j as u,k as n,c as r,w as c,i,L as d,o as m,a as f,m as v,z as x,p as h,v as C}from"./index-h3lAx3Le.js";import{a as p,_ as g,b as _}from"./uni-forms.CfExgS4G.js";import{_ as j}from"./uni-section.CjICiUR3.js";import{U as D}from"./UserInfo.DLZ9WXF6.js";import{a as V}from"./auth.CK2ut5yY.js";const I=a({components:{UserInfo:D},data:()=>({user:{},isEdit:!1,createClassData:{college:"",major:"",className:"",instructor:""},colleges:[{value:"护理学院",text:"护理学院"},{value:"临床医学院",text:"临床医学院"},{value:"药学院",text:"药学院"},{value:"医学技术学院",text:"医学技术学院"},{value:"康养管理学院",text:"康养管理学院"}],majors:[{value:"护理",text:"护理"},{value:"助产",text:"助产"},{value:"婴幼儿托育服务与管理",text:"婴幼儿托育服务与管理"},{value:"老年保健与管理",text:"老年保健与管理"},{value:"临床医学",text:"临床医学"},{value:"中医学",text:"中医学"},{value:"预防医学",text:"预防医学"},{value:"口腔医学技术",text:"口腔医学技术"},{value:"口腔卫生保健",text:"口腔卫生保健"},{value:"健康管理",text:"健康管理"},{value:"药学",text:"药学"},{value:"中药学",text:"中药学"},{value:"中药材生产与加工",text:"中药材生产与加工"},{value:"药品经营与管理",text:"药品经营与管理"},{value:"医学检验技术",text:"医学检验技术"},{value:"医学影像技术",text:"医学影像技术"},{value:"医学生物技术",text:"医学生物技术"},{value:"智能医疗装备技术",text:"智能医疗装备技术"},{value:"食品检验检测技术",text:"食品检验检测技术"},{value:"智慧健康养老服务与管理",text:"智慧健康养老服务与管理"}],instructors:[],classInfo:{}}),onLoad(a){const t=V();t?(this.user=t,this.loadInstructors(),a.id&&(this.isEdit=!0,this.loadClassInfo())):e({url:"/pages/auth/login"})},methods:{async loadClassInfo(){const a=await t.callFunction({name:"class",data:{action:"get",id:this.user.classId}});200===a.result.code?(this.createClassData=a.result.data,this.handleCollegeChange(this.createClassData.college)):l({title:a.result.msg||"获取班级信息失败",icon:"none"})},async loadInstructors(){const a=await t.callFunction({name:"user",data:{action:"list",role:"instructor"}});200===a.result.code&&(this.instructors=a.result.data.map((a=>({value:a.studentId,text:a.name}))))},handleCollegeChange(a){const e={"护理学院":["护理","助产","婴幼儿托育服务与管理","老年保健与管理"],"临床医学院":["临床医学","中医学","预防医学","口腔医学技术","口腔卫生保健","健康管理"],"药学院":["药学","中药学","中药材生产与加工","药品经营与管理"],"医学技术学院":["医学检验技术","医学影像技术","医学生物技术","智能医疗装备技术","食品检验检测技术"],"康养管理学院":["智慧健康养老服务与管理"]};a&&e[a]?this.majors=e[a].map((a=>({value:a,text:a}))):this.majors=[]},async submitClass(){200===(await t.callFunction({name:"class",data:{action:this.isEdit?"update":"create",...this.createClassData}})).result.code&&(l({title:this.isEdit?"修改成功":"创建成功"}),s())}}},[["render",function(a,e,t,l,s,D){const V=h,I=i,b=o("UserInfo"),U=u(n("uni-data-select"),d),E=u(n("uni-forms-item"),p),y=u(n("uni-easyinput"),g),w=C,F=u(n("uni-forms"),_),N=u(n("uni-section"),j);return m(),r(I,{class:"container"},{default:c((()=>[f(I,{class:"navbar"},{default:c((()=>[f(I,{class:"left"},{default:c((()=>[f(V,{class:"title"},{default:c((()=>[v("班级管理")])),_:1})])),_:1}),f(b,{user:s.user},null,8,["user"])])),_:1}),f(N,{title:s.isEdit?"编辑班级信息":"创建班级",type:"line"},{default:c((()=>[f(F,{ref:"createClassForm",model:s.createClassData},{default:c((()=>[f(E,{label:"学院",name:"college"},{default:c((()=>[f(U,{modelValue:s.createClassData.college,"onUpdate:modelValue":e[0]||(e[0]=a=>s.createClassData.college=a),localdata:s.colleges,onChange:D.handleCollegeChange},null,8,["modelValue","localdata","onChange"])])),_:1}),f(E,{label:"专业",name:"major"},{default:c((()=>[f(U,{modelValue:s.createClassData.major,"onUpdate:modelValue":e[1]||(e[1]=a=>s.createClassData.major=a),localdata:s.majors,placeholder:"请选择专业"},null,8,["modelValue","localdata"])])),_:1}),f(E,{label:"班级名",name:"className"},{default:c((()=>[f(y,{modelValue:s.createClassData.className,"onUpdate:modelValue":e[2]||(e[2]=a=>s.createClassData.className=a),placeholder:"请输入班级名"},null,8,["modelValue"])])),_:1}),f(E,{label:"辅导员",name:"instructor"},{default:c((()=>[f(U,{modelValue:s.createClassData.instructor,"onUpdate:modelValue":e[3]||(e[3]=a=>s.createClassData.instructor=a),localdata:s.instructors},null,8,["modelValue","localdata"])])),_:1}),f(w,{onClick:D.submitClass},{default:c((()=>[v(x(s.isEdit?"保存修改":"创建班级"),1)])),_:1},8,["onClick"])])),_:1},8,["model"])])),_:1},8,["title"])])),_:1})}],["__scopeId","data-v-95b98e4b"]]);export{I as default};
